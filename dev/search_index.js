var documenterSearchIndex = {"docs":
[{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"using PowerDynamics\nusing PowerDynamicsParsers\nusing PowerDynamicsParsers.CGMES\nusing CairoMakie\n\ndatasetA = CIMDataset(joinpath(pkgdir(PowerDynamicsParsers), \"test\", \"CGMES\", \"data\", \"reexport\", \"1-EHVHV-mixed-all-2-sw-Ausschnitt\"))\ndatasetB = CIMDataset(joinpath(pkgdir(PowerDynamicsParsers), \"test\", \"CGMES\", \"data\", \"reexport\", \"1-EHVHV-mixed-all-2-sw-Ausschnitt_reexport\"))\nnothing #hide","category":"page"},{"location":"generated/cgmes_testdata_reexport/#Compare-the-two-datasets","page":"Reexported Dataset","title":"Compare the two datasets","text":"","category":"section"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"reduced_datasetA = reduce_complexity(datasetA)\nreduced_datasetB = reduce_complexity(datasetB)\ncomp = PowerDynamicsParsers.CGMES.CIMCollectionComparison(reduced_datasetA, reduced_datasetB)\ninspect_comparison(comp; size=(1000, 1500), node_labels=:short, edge_labels=false)","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"nodesA, edgesA = split_topologically(datasetA; warn=false)\nnodesB, edgesB = split_topologically(datasetB; warn=false)","category":"page"},{"location":"generated/cgmes_testdata_reexport/#Bus-1-Comparison","page":"Reexported Dataset","title":"Bus 1 Comparison","text":"","category":"section"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"comparison1 = PowerDynamicsParsers.CGMES.CIMCollectionComparison(nodesA[1], nodesB[1])\ninspect_comparison(comparison1; size=(1000, 1500))","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata_reexport/#Bus-2-Comparison","page":"Reexported Dataset","title":"Bus 2 Comparison","text":"","category":"section"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"comparison2 = PowerDynamicsParsers.CGMES.CIMCollectionComparison(nodesA[2], nodesB[2])\ninspect_comparison(comparison2; size=(1000, 1500))","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata_reexport/#Bus-3-Comparison","page":"Reexported Dataset","title":"Bus 3 Comparison","text":"","category":"section"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"comparison3 = PowerDynamicsParsers.CGMES.CIMCollectionComparison(nodesA[3], nodesB[3])\ninspect_comparison(comparison3; size=(1000, 1500))","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata_reexport/#Edge-1-Comparison","page":"Reexported Dataset","title":"Edge 1 Comparison","text":"","category":"section"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"comparison1 = PowerDynamicsParsers.CGMES.CIMCollectionComparison(edgesA[1], edgesB[1])\ninspect_comparison(comparison1; size=(1000, 1500))","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata_reexport/#Edge-2-Comparison","page":"Reexported Dataset","title":"Edge 2 Comparison","text":"","category":"section"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"comparison2 = PowerDynamicsParsers.CGMES.CIMCollectionComparison(edgesA[2], edgesB[2])\ninspect_comparison(comparison2; size=(1000, 1500))","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata_reexport/#Calculate-Powerflow-for-edge-again","page":"Reexported Dataset","title":"Calculate Powerflow for edge again","text":"","category":"section"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"emA = CGMES.get_edge_model(edgesA[2])\nCGMES.test_powerflow(emA)","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"emB = CGMES.get_edge_model(edgesB[2])\nCGMES.test_powerflow(emB)","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"","category":"page"},{"location":"generated/cgmes_testdata_reexport/","page":"Reexported Dataset","title":"Reexported Dataset","text":"This page was generated using Literate.jl.","category":"page"},{"location":"generated/cgmes_linemodel/#Line-model-calculation","page":"Wrong Powerflow data in CGMES Export","title":"Line model calculation","text":"","category":"section"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"The goal of this example is to create line models for relatively simple lines (single ACLineSegment branch) and check if their results match the power flow.","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"using PowerDynamics\nusing PowerDynamicsParsers\nusing PowerDynamicsParsers.CGMES\ndataset1 = CIMDataset(joinpath(pkgdir(PowerDynamicsParsers), \"test\", \"CGMES\", \"data\", \"1-EHVHV-mixed-all-2-sw-Ausschnitt\"))\nnodes, edges = split_topologically(dataset1; warn=false)\nnothing #hide","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"In this second dataset, the first line is an ACLineSegment with two terminals. We go ahead and try to build a Power Dynamics line model for it:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"em = CGMES.get_edge_model(edges[2])","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"I wrote a small function that takes the voltage steady state from the surrounding voltage nodes, calculates the power at both ends of the line model, and compares it to the power flow result stored in the CGMES dataset (i.e., the power through the terminals at both ends).","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"CGMES.test_powerflow(em)","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"However, the results do not match! For debugging, I implemented another function: given the voltages and powers at both ends, this function tries to calculate the correct R, X, G, B parameters for a pi-line model.","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"CGMES.determine_branch_parameters(edges[2])","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"We see that the R and X values are different from the calculated ones. If we use the calculated variables instead, the power flow result matches the values from the dataset:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"set_default!(em, :ACLineSegment₊R, 0.00669677741911068)\nset_default!(em, :ACLineSegment₊X, 0.005344772670911904)\nCGMES.test_powerflow(em)","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"At first, I thought this was due to some base calculation or some other parameter mismatch. However, let's take the dataset I got first:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"dataset2 = CIMDataset(joinpath(pkgdir(PowerDynamicsParsers), \"test\", \"CGMES\", \"data\", \"testdata1\"))\nnodes, edges = split_topologically(dataset2; warn=false)\nnothing # hide","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"Here, we have 3 power lines and each of them is just a pi-line. So we can check again:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"Power line 1:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"em = CGMES.get_edge_model(edges[1])","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"CGMES.test_powerflow(em)","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"Power line 2:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"em = CGMES.get_edge_model(edges[2])\nCGMES.test_powerflow(em)","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"Power line 3:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"em = CGMES.get_edge_model(edges[3])\nCGMES.test_powerflow(em)","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"For this model, the backward calculation of R, X, G, and B can be validated too:","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"CGMES.determine_branch_parameters(edges[3])","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"This confirms the results.","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"danger: Error in the CGMES Data?\nIn conclusion, it looks like the CGMES data is not consistent in the newer dataset! Either the branch parameters are wrong, or the power flow results are wrong.","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"","category":"page"},{"location":"generated/cgmes_linemodel/","page":"Wrong Powerflow data in CGMES Export","title":"Wrong Powerflow data in CGMES Export","text":"This page was generated using Literate.jl.","category":"page"},{"location":"generated/cgmes_testdata/#Inspection-of-Test-1-EHVHV-mixed-all-2-sw-Ausschnitt","page":"Inspection of CGMES Test Data","title":"Inspection of Test 1-EHVHV-mixed-all-2-sw-Ausschnitt","text":"","category":"section"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"using PowerDynamics\nusing PowerDynamicsParsers\nusing PowerDynamicsParsers.CGMES\nusing CairoMakie\n\nDATA = joinpath(pkgdir(PowerDynamicsParsers), \"test\", \"CGMES\", \"data\", \"1-EHVHV-mixed-all-2-sw-Ausschnitt\")\ndataset = CIMCollection(CIMDataset(DATA))\nnothing #hide","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"tip: Tip\nHover the nodes to inspect the properties!","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"reduced_dataset = reduce_complexity(dataset)\ninspect_collection(reduced_dataset; edge_labels=false, node_labels=:short, size=(1000,1000))","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Well, that's still a bit too much. Let's split the dataset topologically","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"nodes, edges = split_topologically(dataset; warn=false)\nnothing #hide","category":"page"},{"location":"generated/cgmes_testdata/#Bus-3:-Load","page":"Inspection of CGMES Test Data","title":"Bus 3: Load","text":"","category":"section"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"inspect_collection(nodes[3]; size=(900,900))","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Discussion: Power of load and powerflow result match perfectly. I guess this is just a PQ node for the powerflow.","category":"page"},{"location":"generated/cgmes_testdata/#Bus-2:-Load-Machine","page":"Inspection of CGMES Test Data","title":"Bus 2: Load + Machine","text":"","category":"section"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"inspect_collection(nodes[2]; size=(900,900))","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Discussion:","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Synchronous machine has power P=Q=0, no voltage controller\nThe bus power matches the load power, so I guess once again this is a PQ node?","category":"page"},{"location":"generated/cgmes_testdata/#Bus-1:-Three-Machines","page":"Inspection of CGMES Test Data","title":"Bus 1: Three Machines","text":"","category":"section"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"inspect_collection(nodes[1]; size=(900,900))","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Discussion:","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Why is the regulating control connected to a different terminal equipment than the machine?\nThe powerflow result on both machine terminals is not even close to the machine setpoint (nor power factor)\nThe voltage of the topological node does not match the reference value for the voltage regulator\nOn the third machine, the PQ setpoints are consistent with the powerflow result\nThe overall bus power (as seen by state value of connected transformer) is P=-0.47 and Q=0.019, so the SvPowerflow values seem consistent","category":"page"},{"location":"generated/cgmes_testdata/#Powerline-1:-Transformer","page":"Inspection of CGMES Test Data","title":"Powerline 1: Transformer","text":"","category":"section"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"inspect_collection(edges[1]; size=(900,900))","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Discussion:","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Both transformer ends have b/g and r/x, so this can be interpreted as a pi-line with two bases and r1+r2 / x1+x2 impedance.\nThe RatioTapChanger points at one transformer end but regulates the voltage at the other transformer end. Does it mean it acts on one end to control voltage on the other end?","category":"page"},{"location":"generated/cgmes_testdata/#Powerline-2:-AC-Pi-Line","page":"Inspection of CGMES Test Data","title":"Powerline 2: AC Pi-Line","text":"","category":"section"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"inspect_collection(edges[2]; size=(900,900))","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"PowerDynamicsParsers.CGMES.html_hover_map() #hide","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"Discussion: Seems fine.","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"","category":"page"},{"location":"generated/cgmes_testdata/","page":"Inspection of CGMES Test Data","title":"Inspection of CGMES Test Data","text":"This page was generated using Literate.jl.","category":"page"},{"location":"#PowerDynamicsParsers-Docs","page":"Home","title":"PowerDynamicsParsers Docs","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Experimental package to explor options to create PowerDynamics models from CIM/CGMES files.","category":"page"}]
}

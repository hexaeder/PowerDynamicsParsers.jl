<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Inspection of CGMES Test Data · PowerDynamicsParsers.jl</title><meta name="title" content="Inspection of CGMES Test Data · PowerDynamicsParsers.jl"/><meta property="og:title" content="Inspection of CGMES Test Data · PowerDynamicsParsers.jl"/><meta property="twitter:title" content="Inspection of CGMES Test Data · PowerDynamicsParsers.jl"/><meta name="description" content="Documentation for PowerDynamicsParsers.jl."/><meta property="og:description" content="Documentation for PowerDynamicsParsers.jl."/><meta property="twitter:description" content="Documentation for PowerDynamicsParsers.jl."/><meta property="og:url" content="https://hexaeder.github.io/PowerDynamicsParsers.jl/generated/cgmes_testdata/"/><meta property="twitter:url" content="https://hexaeder.github.io/PowerDynamicsParsers.jl/generated/cgmes_testdata/"/><link rel="canonical" href="https://hexaeder.github.io/PowerDynamicsParsers.jl/generated/cgmes_testdata/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PowerDynamicsParsers.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Inspection of CGMES Test Data</a><ul class="internal"><li><a class="tocitem" href="#Bus-3:-Load"><span>Bus 3: Load</span></a></li><li><a class="tocitem" href="#Bus-2:-Load-Machine"><span>Bus 2: Load + Machine</span></a></li><li><a class="tocitem" href="#Bus-1:-Three-Machines"><span>Bus 1: Three Machines</span></a></li><li><a class="tocitem" href="#Powerline-1:-Transformer"><span>Powerline 1: Transformer</span></a></li><li><a class="tocitem" href="#Powerline-2:-AC-Pi-Line"><span>Powerline 2: AC Pi-Line</span></a></li></ul></li><li><a class="tocitem" href="../cgmes_linemodel/">Wrong Powerflow data in CGMES Export</a></li><li><a class="tocitem" href="../cgmes_testdata_reexport/">Reexported Dataset</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Inspection of CGMES Test Data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Inspection of CGMES Test Data</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/hexaeder/PowerDynamicsParsers.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/hexaeder/PowerDynamicsParsers.jl/blob/main/docs/examples/cgmes_testdata.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Inspection-of-Test-1-EHVHV-mixed-all-2-sw-Ausschnitt"><a class="docs-heading-anchor" href="#Inspection-of-Test-1-EHVHV-mixed-all-2-sw-Ausschnitt">Inspection of Test 1-EHVHV-mixed-all-2-sw-Ausschnitt</a><a id="Inspection-of-Test-1-EHVHV-mixed-all-2-sw-Ausschnitt-1"></a><a class="docs-heading-anchor-permalink" href="#Inspection-of-Test-1-EHVHV-mixed-all-2-sw-Ausschnitt" title="Permalink"></a></h1><pre><code class="language-julia hljs">using PowerDynamics
using PowerDynamicsParsers
using PowerDynamicsParsers.CGMES
using CairoMakie

DATA = joinpath(pkgdir(PowerDynamicsParsers), &quot;test&quot;, &quot;CGMES&quot;, &quot;data&quot;, &quot;1-EHVHV-mixed-all-2-sw-Ausschnitt&quot;)
dataset = CIMCollection(CIMDataset(DATA))</code></pre><div class="admonition is-success" id="Tip-fef913799f39104c"><header class="admonition-header">Tip<a class="admonition-anchor" href="#Tip-fef913799f39104c" title="Permalink"></a></header><div class="admonition-body"><p>Hover the nodes to inspect the properties!</p></div></div><pre><code class="language-julia hljs">reduced_dataset = reduce_complexity(dataset)
inspect_collection(reduced_dataset; edge_labels=false, node_labels=:short, size=(1000,1000))</code></pre><img src="56ab672b.png" alt="Example block output"/><script>
// Find the previous image element and wrap it with hover functionality
(function() {
var script = document.currentScript;
var img = script.previousElementSibling;

// Find the preceding img element
while (img && img.tagName !== 'IMG') {
img = img.previousElementSibling;
}

if (!img) return; // No image found

function setupHoverZones() {
// Create wrapper div
var wrapper = document.createElement('div');
wrapper.className = 'graph-hover-container';
wrapper.style.cssText = 'position: relative; display: inline-block;';

// Insert wrapper before img and move img into wrapper
img.parentNode.insertBefore(wrapper, img);
wrapper.appendChild(img);

// Ensure wrapper is exactly the same size as the image
wrapper.style.width = img.offsetWidth + 'px';
wrapper.style.height = img.offsetHeight + 'px';

// Create hover zones container
var hoverZones = document.createElement('div');
hoverZones.className = 'hover-zones';
hoverZones.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;';
wrapper.appendChild(hoverZones);

// Create tooltip
var tooltip = document.createElement('div');
tooltip.id = 'tooltip-' + Math.random().toString(36).substr(2, 9);
tooltip.style.cssText = `position: absolute;
background: rgba(0,0,0,0.8);
color: white;
padding: 5px 10px;
border-radius: 4px;
font-size: 10px;
font-family: monospace;
white-space: pre-line;
pointer-events: none;
z-index: 20;
display: none;
max-width: 400px;
word-wrap: break-word;`;
wrapper.appendChild(tooltip);

// Create hover zone data
var hoverZoneData = [{x: 22.229733372046294, y: 56.23228275775109, width: 2.0, height: 2.0, label: "LoadAggregate\nno properties", node: 1},
            {x: 22.696124733368226, y: 63.56779481694011, width: 2.0, height: 2.0, label: "LoadStatic\nstaticLoadModelType = unresolved ref", node: 2},
            {x: 84.87507304644633, y: 23.763450819837107, width: 2.0, height: 2.0, label: "SynchronousMachineTimeConstantReactance\n\"EHV Gen 200\"\nDynamicsFunctionBlock.enabled = true\nRotatingMachineDynamics.damping = 0\nRotatingMachineDynamics.inertia = 4.75\nRotatingMachineDynamics.saturationFactor = 0\nRotatingMachineDynamics.saturationFactor120 = 0\nRotatingMachineDynamics.statorLeakageReactance = 0.172\nRotatingMachineDynamics.statorResistance = 0\nSynchronousMachineDetailed.efdBaseRatio = 1\nSynchronousMachineDetailed.ifdBaseType = unresolved ref\nmodelType = unresolved ref\nrotorType = unresolved ref\ntpdo = 6.66667\ntppdo = 0.075\ntppqo = 0.075\ntpqo = 6.66667\nxDirectSubtrans = 0.2\nxDirectSync = 2\nxDirectTrans = 0.3\nxQuadSubtrans = 0.2\nxQuadSync = 2\nxQuadTrans = 0.3", node: 3},
            {x: 78.11592017106179, y: 15.818647938791697, width: 2.0, height: 2.0, label: "SynchronousMachineTimeConstantReactance\n\"EHV Gen 295\"\nDynamicsFunctionBlock.enabled = true\nRotatingMachineDynamics.damping = 0\nRotatingMachineDynamics.inertia = 4.75\nRotatingMachineDynamics.saturationFactor = 0\nRotatingMachineDynamics.saturationFactor120 = 0\nRotatingMachineDynamics.statorLeakageReactance = 0.172\nRotatingMachineDynamics.statorResistance = 0\nSynchronousMachineDetailed.efdBaseRatio = 1\nSynchronousMachineDetailed.ifdBaseType = unresolved ref\nmodelType = unresolved ref\nrotorType = unresolved ref\ntpdo = 6.66667\ntppdo = 0.075\ntppqo = 0.075\ntpqo = 6.66667\nxDirectSubtrans = 0.2\nxDirectSync = 2\nxDirectTrans = 0.3\nxQuadSubtrans = 0.2\nxQuadSync = 2\nxQuadTrans = 0.3", node: 4},
            {x: 28.354101932880365, y: 88.38653893709076, width: 2.0, height: 2.0, label: "SvPowerFlow\np = -0.197182\nq = 0.0116045", node: 5},
            {x: 61.89788277646008, y: 20.274235108460093, width: 2.0, height: 2.0, label: "SvPowerFlow\np = -0.20569\nq = 0.00168842", node: 6},
            {x: 46.41453717929881, y: 41.92439135208872, width: 2.0, height: 2.0, label: "SvPowerFlow\np = -0.394418\nq = 0.130803", node: 7},
            {x: 6.042570669968268, y: 61.63365863124213, width: 2.0, height: 2.0, label: "SvPowerFlow\np = 0.197259\nq = -0.0113707", node: 8},
            {x: 41.20934795809894, y: 75.81034273167492, width: 2.0, height: 2.0, label: "SvPowerFlow\np = 0.197183\nq = -0.119135", node: 9},
            {x: 31.628745483917175, y: 35.525167325135456, width: 2.0, height: 2.0, label: "SvPowerFlow\np = 0.197259\nq = -0.0113707", node: 10},
            {x: 67.13712331429518, y: 20.830741370546146, width: 2.0, height: 2.0, label: "SvPowerFlow\np = -0.206473\nq = 0.0170694", node: 11},
            {x: 65.03992609542173, y: 56.7929917093397, width: 2.0, height: 2.0, label: "SvPowerFlow\np = 0.474291\nq = -0.0195198", node: 12},
            {x: 10.19700485980169, y: 94.33636350244915, width: 2.0, height: 2.0, label: "SvPowerFlow\np = 0\nq = 0", node: 13},
            {x: 77.67748536589929, y: 59.39483838919525, width: 2.0, height: 2.0, label: "SvPowerFlow\np = -0.063126\nq = 0", node: 14},
            {x: 19.76265586176443, y: 86.89255171965064, width: 2.0, height: 2.0, label: "SvVoltage\nangle = -0.00943165\nv = 117.503", node: 15},
            {x: 43.07348578687251, y: 61.3815979425798, width: 2.0, height: 2.0, label: "SvVoltage\nangle = -0.00868266\nv = 117.504", node: 16},
            {x: 68.76451937722481, y: 47.759507410153944, width: 2.0, height: 2.0, label: "SvVoltage\nangle = 0\nv = 235.001", node: 17},
            {x: 60.990919342608784, y: 73.99230755964673, width: 2.0, height: 2.0, label: "SvTapStep\nposition = 0", node: 18},
            {x: 40.178015229826244, y: 53.60233157705121, width: 2.0, height: 2.0, label: "TopologicalNode\n\"HV2 Bus 7\"\nBaseVoltage = unresolved ref", node: 19},
            {x: 17.869733972602262, y: 76.79461312166502, width: 2.0, height: 2.0, label: "TopologicalNode\n\"HV2 Bus 339\"\nBaseVoltage = unresolved ref", node: 20},
            {x: 68.1947019172016, y: 40.67531847143327, width: 2.0, height: 2.0, label: "TopologicalNode\n\"EHV Bus 1865\"\nBaseVoltage = unresolved ref", node: 21},
            {x: 25.81248180047761, y: 78.26858201117575, width: 2.0, height: 2.0, label: "Terminal\n\"HV2 Bus 345\"\nACDCsequenceNumber = 2\nphases = unresolved ref\nACDCconnected = true", node: 22},
            {x: 71.56245397379855, y: 30.973124236321368, width: 2.0, height: 2.0, label: "Terminal\n\"Cubicle_EHV Gen 200\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 23},
            {x: 47.8508392399008, y: 52.16481046775831, width: 2.0, height: 2.0, label: "Terminal\n\"HV2 Bus 22\"\nACDCsequenceNumber = 2\nphases = unresolved ref\nACDCconnected = true", node: 24},
            {x: 73.91327744301684, y: 50.39723115109476, width: 2.0, height: 2.0, label: "Terminal\n\"Cubicle_EHV Sgen 76\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 25},
            {x: 37.860610784614735, y: 66.4129937449957, width: 2.0, height: 2.0, label: "Terminal\n\"HV2 Bus 11\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 26},
            {x: 39.64008036175479, y: 59.22125638015372, width: 2.0, height: 2.0, label: "Terminal\n\"HV2 Bus 8\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 27},
            {x: 11.992725911436025, y: 84.66282891473506, width: 2.0, height: 2.0, label: "Terminal\n\"Cubicle_HV2 Sgen 44\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 28},
            {x: 15.670159043959211, y: 84.6326814186398, width: 2.0, height: 2.0, label: "Terminal\n\"HV2 Bus 340\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 29},
            {x: 72.84317456902485, y: 45.272372797038216, width: 2.0, height: 2.0, label: "Terminal\n\"EHV Bus 1866\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 30},
            {x: 39.46127799097524, y: 44.59428549892679, width: 2.0, height: 2.0, label: "Terminal\n\"HV2 Bus 7\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 31},
            {x: 64.9884162166158, y: 36.25475829071754, width: 2.0, height: 2.0, label: "Terminal\n\"EHV Bus 1865\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 32},
            {x: 11.81797899825484, y: 76.57897980996384, width: 2.0, height: 2.0, label: "Terminal\n\"HV2 Bus 339\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 33},
            {x: 65.93819151627459, y: 29.701803797152227, width: 2.0, height: 2.0, label: "Terminal\n\"Cubicle_EHV Gen 295\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 34},
            {x: 33.47655917399809, y: 46.46519370839906, width: 2.0, height: 2.0, label: "Terminal\n\"Cubicle_HV2 Load 2\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 35},
            {x: 14.236067101327807, y: 66.23308914172856, width: 2.0, height: 2.0, label: "Terminal\n\"Cubicle_HV2 Load 45\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 36},
            {x: 61.67123410392055, y: 47.029908562940015, width: 2.0, height: 2.0, label: "Terminal\n\"EHV Bus 3094\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 37},
            {x: 54.82020331467358, y: 49.30879825860406, width: 2.0, height: 2.0, label: "PowerTransformer\n\"HV2 Trafo 3\"\nEquipment.EquipmentContainer = unresolved ref\nisPartOfGeneratorUnit = false\noperationalValuesConsidered = false", node: 38},
            {x: 73.85608312712077, y: 24.6336460297906, width: 2.0, height: 2.0, label: "SynchronousMachine\n\"EHV Gen 295\"\ndescription = pp_302\nRotatingMachine.ratedPowerFactor = 0.95\nRotatingMachine.ratedS = 23.6842\nRotatingMachine.ratedU = 220\nearthing = true\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 7.39539\nminQ = -7.39539\nqPercent = 9.00113\nr = 0\nr0 = 0\nr2 = 0\nsatDirectSubtransX = 0.2\nsatDirectSyncX = 1.2\nshortCircuitRotorType = unresolved ref\ntype = unresolved ref\nx0 = 0.1\nx2 = 0.2\nRegulatingCondEq.controlEnabled = true\nRotatingMachine.p = 0\nRotatingMachine.q = -23.6842\noperatingMode = unresolved ref\nreferencePriority = 0", node: 39},
            {x: 80.32077319570556, y: 46.54669181575927, width: 2.0, height: 2.0, label: "SynchronousMachine\n\"EHV Sgen 76\"\ndescription = WP8\nRotatingMachine.ratedPowerFactor = 1\nRotatingMachine.ratedS = 36\nRotatingMachine.ratedU = 220\nearthing = false\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 0\nminQ = 0\nr = 0\nr0 = 0\nr2 = 99999\nsatDirectSubtransX = 999\ntype = unresolved ref\nx0 = 0.1\nx2 = 99999\nRegulatingCondEq.controlEnabled = false\nRotatingMachine.p = -0.063126\nRotatingMachine.q = 0\noperatingMode = unresolved ref\nreferencePriority = 0", node: 40},
            {x: 80.31329999019002, y: 31.531151907601817, width: 2.0, height: 2.0, label: "SynchronousMachine\n\"EHV Gen 200\"\ndescription = pp_207\nRotatingMachine.ratedPowerFactor = 0.95\nRotatingMachine.ratedS = 242.105\nRotatingMachine.ratedU = 220\nearthing = true\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 75.5973\nminQ = -75.5973\nqPercent = 90.9989\nr = 0\nr0 = 0\nr2 = 0\nsatDirectSubtransX = 0.2\nsatDirectSyncX = 1.2\nshortCircuitRotorType = unresolved ref\ntype = unresolved ref\nx0 = 0.1\nx2 = 0.2\nRegulatingCondEq.controlEnabled = true\nRotatingMachine.p = 0\nRotatingMachine.q = -242.105\noperatingMode = unresolved ref\nreferencePriority = 0", node: 41},
            {x: 6.418588013274541, y: 75.98005104578233, width: 2.0, height: 2.0, label: "SynchronousMachine\n\"HV2 Sgen 44\"\ndescription = mv_add1\nRotatingMachine.ratedPowerFactor = 1\nRotatingMachine.ratedS = 1\nRotatingMachine.ratedU = 110\nearthing = false\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 0\nminQ = 0\nr = 0\nr0 = 0\nr2 = 99999\nsatDirectSubtransX = 999\ntype = unresolved ref\nx0 = 0.1\nx2 = 99999\nRegulatingCondEq.controlEnabled = false\nRotatingMachine.p = 0\nRotatingMachine.q = 0\noperatingMode = unresolved ref\nreferencePriority = 0", node: 42},
            {x: 57.86769930464477, y: 64.57536636165071, width: 2.0, height: 2.0, label: "RatioTapChanger\n\"HV2 Trafo 3\"\nstepVoltageIncrement = 1\ntculControlMode = unresolved ref\nTapChanger.highStep = 16\nTapChanger.lowStep = -16\nTapChanger.ltcFlag = false\nTapChanger.neutralStep = 0\nTapChanger.neutralU = 220\nTapChanger.normalStep = 0\nTapChanger.controlEnabled = true\nTapChanger.step = 0", node: 43},
            {x: 86.64100539188479, y: 51.37398789880656, width: 2.0, height: 2.0, label: "WindGeneratingUnit\n\"EHV Sgen 76\"\nEquipment.EquipmentContainer = unresolved ref\nGeneratingUnit.initialP = 0.063126\nGeneratingUnit.maxOperatingP = 36\nGeneratingUnit.minOperatingP = 0\nwindGenUnitType = unresolved ref\nGeneratingUnit.normalPF = 0", node: 44},
            {x: 87.44824462450381, y: 32.383311909899334, width: 2.0, height: 2.0, label: "ThermalGeneratingUnit\n\"EHV Gen 200\"\nEquipment.EquipmentContainer = unresolved ref\nGeneratingUnit.initialP = 0\nGeneratingUnit.maxOperatingP = 230\nGeneratingUnit.minOperatingP = 50\nGeneratingUnit.normalPF = 0", node: 45},
            {x: 9.24582544200133, y: 78.50115015302733, width: 2.0, height: 2.0, label: "BusbarSection\n\"HV2 Bus 340\"\nno properties", node: 46},
            {x: 33.79203603314923, y: 39.2380149333165, width: 2.0, height: 2.0, label: "BusbarSection\n\"HV2 Bus 7\"\nno properties", node: 47},
            {x: 33.60655217125425, y: 56.98286683115084, width: 2.0, height: 2.0, label: "BusbarSection\n\"HV2 Bus 8\"\nno properties", node: 48},
            {x: 5.999998849074768, y: 68.43421128436216, width: 2.0, height: 2.0, label: "BusbarSection\n\"HV2 Bus 339\"\nno properties", node: 49},
            {x: 72.23503379387529, y: 34.32863085996999, width: 2.0, height: 2.0, label: "BusbarSection\n\"EHV Bus 1865\"\nno properties", node: 50},
            {x: 79.80545749959117, y: 41.816444522189414, width: 2.0, height: 2.0, label: "BusbarSection\n\"EHV Bus 1866\"\nno properties", node: 51},
            {x: 73.20389844841232, y: 13.06363623584823, width: 2.0, height: 2.0, label: "GeneratingUnit\n\"EHV Gen 295\"\nEquipment.EquipmentContainer = unresolved ref\ninitialP = 0\nmaxOperatingP = 22.5\nminOperatingP = 1\nnormalPF = 0", node: 52},
            {x: 94.00000158629503, y: 31.23384861811672, width: 2.0, height: 2.0, label: "FossilFuel\n\"EHV Gen 200\"\nfossilFuelType = unresolved ref", node: 53},
            {x: 51.176516375806514, y: 61.88498403992615, width: 2.0, height: 2.0, label: "TapChangerControl\n\"HV2 Trafo 3\"\nRegulatingControl.mode = unresolved ref\nRegulatingControl.discrete = true\nRegulatingControl.enabled = true\nRegulatingControl.targetDeadband = 2.2\nRegulatingControl.targetValue = 110\nRegulatingControl.targetValueUnitMultiplier = unresolved ref", node: 54},
            {x: 12.653884799399417, y: 69.44212046801162, width: 2.0, height: 2.0, label: "VoltageLevel\n\"HV2 Bus 339-HV2 Bus 340\"\nBaseVoltage = unresolved ref\nSubstation = unresolved ref", node: 55},
            {x: 75.46346436080495, y: 37.20466069787661, width: 2.0, height: 2.0, label: "VoltageLevel\n\"EHV Bus 1865-EHV Bus 1866\"\nBaseVoltage = unresolved ref\nSubstation = unresolved ref", node: 56},
            {x: 33.696499603428755, y: 49.97954445225713, width: 2.0, height: 2.0, label: "VoltageLevel\n\"HV2 Bus 7-HV2 Bus 8\"\nBaseVoltage = unresolved ref\nSubstation = unresolved ref", node: 57},
            {x: 10.289479993841747, y: 32.9488489966152, width: 2.0, height: 2.0, label: "LoadArea\n\"HV2 Load 45\"\nno properties", node: 58},
            {x: 14.60086885214597, y: 40.08795282392303, width: 2.0, height: 2.0, label: "SubLoadArea\n\"HV2 Load 45\"\nno properties", node: 59},
            {x: 77.47739491559244, y: 26.420390614858224, width: 2.0, height: 2.0, label: "RegulatingControl\n\"Stactrl_EHV Bus 1865\"\nmode = unresolved ref\ndiscrete = false\nenabled = true\ntargetValue = 234.96\ntargetValueUnitMultiplier = unresolved ref", node: 60},
            {x: 70.64549975494205, y: 21.56604575648524, width: 2.0, height: 2.0, label: "RegulatingControl\n\"Stactrl_EHV Bus 1865\"\nmode = unresolved ref\ndiscrete = false\nenabled = true\ntargetValue = 234.96\ntargetValueUnitMultiplier = unresolved ref", node: 61},
            {x: 32.55397691414576, y: 73.80608544707773, width: 2.0, height: 2.0, label: "ACLineSegment\n\"HV2 Line 112\"\nb0ch = 0\nbch = 7.7883e-6\ng0ch = 0\ngch = 0\nr = 0.301627\nr0 = 0\nshortCircuitEndTemperature = 80\nx = 0.815356\nx0 = 0\nConductingEquipment.BaseVoltage = unresolved ref\nConductor.length = 2.75458", node: 62},
            {x: 15.485538476122429, y: 58.30589128378749, width: 2.0, height: 2.0, label: "ConformLoad\n\"HV2 Load 45\"\nEnergyConsumer.p = 0.197259\nEnergyConsumer.q = -0.0113707", node: 63},
            {x: 26.417222903381226, y: 48.4466501947755, width: 2.0, height: 2.0, label: "ConformLoad\n\"HV2 Load 2\"\nEnergyConsumer.p = 0.197259\nEnergyConsumer.q = -0.0113707", node: 64},
            {x: 18.75978580844576, y: 48.07034727522856, width: 2.0, height: 2.0, label: "ConformLoadGroup\n\"HV2 Load 45\"\nno properties", node: 65},
            {x: 20.530186459813613, y: 52.143881779568765, width: 2.0, height: 2.0, label: "LoadResponseCharacteristic\n\"mv_add1\"\nexponentModel = true\npVoltageExponent = 2\nqVoltageExponent = 2", node: 66},
            {x: 59.10436731998996, y: 54.93839008768504, width: 2.0, height: 2.0, label: "PowerTransformerEnd\n\"HV2 Trafo 3\"\nb = -2.0138e-6\nb0 = -0.00206612\nconnectionKind = unresolved ref\ng = 1.44628e-6\ng0 = 0\nphaseAngleClock = 0\nr = 0.207044\nr0 = 0\nratedS = 300\nratedU = 220\nx = 19.3589\nx0 = 4.84\nTransformerEnd.BaseVoltage = unresolved ref\nTransformerEnd.endNumber = 1\nTransformerEnd.grounded = true\nTransformerEnd.rground = 0\nTransformerEnd.xground = 0", node: 67},
            {x: 50.630667978868225, y: 45.56009863258734, width: 2.0, height: 2.0, label: "PowerTransformerEnd\n\"HV2 Trafo 3\"\nb = 0\nb0 = 0\nconnectionKind = unresolved ref\ng = 0\ng0 = 0\nphaseAngleClock = 0\nr = 0\nr0 = 0\nratedS = 300\nratedU = 110\nx = 0\nx0 = 0\nTransformerEnd.BaseVoltage = unresolved ref\nTransformerEnd.endNumber = 2\nTransformerEnd.grounded = true\nTransformerEnd.rground = 0\nTransformerEnd.xground = 0", node: 68}];

// Create hover zones with proper aspect ratio
hoverZoneData.forEach(function(zoneData, i) {
var zone = document.createElement('div');
zone.className = 'hover-zone';

// Use the width and height percentages calculated directly in Julia
var zoneWidth = zoneData.width;
var zoneHeight = zoneData.height;

zone.style.cssText = `position: absolute;
left: ${zoneData.x - zoneWidth/2}%;
top: ${zoneData.y - zoneHeight/2}%;
width: ${zoneWidth}%;
height: ${zoneHeight}%;
pointer-events: all;
cursor: pointer;
z-index: 10;
border: none;
background: transparent;`;
zone.setAttribute('data-label', zoneData.label);
zone.setAttribute('data-node', zoneData.node);
hoverZones.appendChild(zone);
});


// Add event listeners to hover zones
var zones = hoverZones.querySelectorAll('.hover-zone');
zones.forEach(function(zone) {
zone.addEventListener('mouseenter', function(e) {
var label = this.getAttribute('data-label');
tooltip.innerHTML = label;
tooltip.style.display = 'block';

// Position tooltip
var rect = wrapper.getBoundingClientRect();
var zoneRect = this.getBoundingClientRect();
tooltip.style.left = (zoneRect.left - rect.left + zoneRect.width/2) + 'px';
tooltip.style.top = (zoneRect.top - rect.top - tooltip.offsetHeight - 5) + 'px';

// Adjust if tooltip goes outside container
var tooltipRect = tooltip.getBoundingClientRect();
if (tooltipRect.right > rect.right) {
tooltip.style.left = (rect.right - rect.left - tooltipRect.width - 5) + 'px';
}
if (tooltipRect.left < rect.left) {
tooltip.style.left = '5px';
}
if (tooltipRect.top < rect.top) {
tooltip.style.top = (zoneRect.bottom - rect.top + 5) + 'px';
}
});

zone.addEventListener('mouseleave', function(e) {
tooltip.style.display = 'none';
});
});
}

// Wait for image to load before setting up hover zones
if (img.complete && img.offsetWidth > 0) {
// Image already loaded
setupHoverZones();
} else {
// Wait for image to load
img.addEventListener('load', setupHoverZones);
}
})();
</script>
<p>Well, that&#39;s still a bit too much. Let&#39;s split the dataset topologically</p><pre><code class="language-julia hljs">nodes, edges = split_topologically(dataset; warn=false)</code></pre><h2 id="Bus-3:-Load"><a class="docs-heading-anchor" href="#Bus-3:-Load">Bus 3: Load</a><a id="Bus-3:-Load-1"></a><a class="docs-heading-anchor-permalink" href="#Bus-3:-Load" title="Permalink"></a></h2><pre><code class="language-julia hljs">inspect_collection(nodes[3]; size=(900,900))</code></pre><img src="a82708e7.png" alt="Example block output"/><script>
// Find the previous image element and wrap it with hover functionality
(function() {
var script = document.currentScript;
var img = script.previousElementSibling;

// Find the preceding img element
while (img && img.tagName !== 'IMG') {
img = img.previousElementSibling;
}

if (!img) return; // No image found

function setupHoverZones() {
// Create wrapper div
var wrapper = document.createElement('div');
wrapper.className = 'graph-hover-container';
wrapper.style.cssText = 'position: relative; display: inline-block;';

// Insert wrapper before img and move img into wrapper
img.parentNode.insertBefore(wrapper, img);
wrapper.appendChild(img);

// Ensure wrapper is exactly the same size as the image
wrapper.style.width = img.offsetWidth + 'px';
wrapper.style.height = img.offsetHeight + 'px';

// Create hover zones container
var hoverZones = document.createElement('div');
hoverZones.className = 'hover-zones';
hoverZones.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;';
wrapper.appendChild(hoverZones);

// Create tooltip
var tooltip = document.createElement('div');
tooltip.id = 'tooltip-' + Math.random().toString(36).substr(2, 9);
tooltip.style.cssText = `position: absolute;
background: rgba(0,0,0,0.8);
color: white;
padding: 5px 10px;
border-radius: 4px;
font-size: 10px;
font-family: monospace;
white-space: pre-line;
pointer-events: none;
z-index: 20;
display: none;
max-width: 400px;
word-wrap: break-word;`;
wrapper.appendChild(tooltip);

// Create hover zone data
var hoverZoneData = [{x: 23.309320796974685, y: 61.54790951941369, width: 2.2222222222222223, height: 2.2222222222222223, label: "TopologicalNode\n\"HV2 Bus 7\"\nConnectivityNodeContainer = unresolved ref", node: 1},
            {x: 6.161615066596647, y: 72.1607312840925, width: 2.2222222222222223, height: 2.2222222222222223, label: "BaseVoltage\n\"110.00 kV\"\nnominalVoltage = 110\ndescription = BaseVoltage 110.00 kV", node: 2},
            {x: 41.40653292984739, y: 71.23018308352187, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"Cubicle_HV2 Load 2\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 3},
            {x: 61.62841332704391, y: 68.30980288387201, width: 2.2222222222222223, height: 2.2222222222222223, label: "ConformLoad\n\"HV2 Load 2\"\nEquipment.EquipmentContainer = unresolved ref\nEnergyConsumer.p = 0.197259\nEnergyConsumer.q = -0.0113707", node: 4},
            {x: 70.46290794136225, y: 47.013363678653086, width: 2.2222222222222223, height: 2.2222222222222223, label: "ConformLoadGroup\n\"HV2 Load 45\"\nno properties", node: 5},
            {x: 82.15443857475088, y: 29.988037722617655, width: 2.2222222222222223, height: 2.2222222222222223, label: "SubLoadArea\n\"HV2 Load 45\"\nno properties", node: 6},
            {x: 93.83838068178034, y: 14.010105587063181, width: 2.2222222222222223, height: 2.2222222222222223, label: "LoadArea\n\"HV2 Load 45\"\nno properties", node: 7},
            {x: 67.08238990780396, y: 91.37260682468855, width: 2.2222222222222223, height: 2.2222222222222223, label: "LoadResponseCharacteristic\n\"mv_add1\"\nexponentModel = true\npVoltageExponent = 2\nqVoltageExponent = 2", node: 8},
            {x: 79.59784042646751, y: 76.57862889359043, width: 2.2222222222222223, height: 2.2222222222222223, label: "LoadAggregate\nno properties", node: 9},
            {x: 36.03193705837962, y: 94.21212186545299, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = 0.197259\nq = -0.0113707", node: 10},
            {x: 13.84457596408238, y: 41.797340357833335, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvVoltage\nangle = -0.00868266\nv = 117.504", node: 11}];

// Create hover zones with proper aspect ratio
hoverZoneData.forEach(function(zoneData, i) {
var zone = document.createElement('div');
zone.className = 'hover-zone';

// Use the width and height percentages calculated directly in Julia
var zoneWidth = zoneData.width;
var zoneHeight = zoneData.height;

zone.style.cssText = `position: absolute;
left: ${zoneData.x - zoneWidth/2}%;
top: ${zoneData.y - zoneHeight/2}%;
width: ${zoneWidth}%;
height: ${zoneHeight}%;
pointer-events: all;
cursor: pointer;
z-index: 10;
border: none;
background: transparent;`;
zone.setAttribute('data-label', zoneData.label);
zone.setAttribute('data-node', zoneData.node);
hoverZones.appendChild(zone);
});


// Add event listeners to hover zones
var zones = hoverZones.querySelectorAll('.hover-zone');
zones.forEach(function(zone) {
zone.addEventListener('mouseenter', function(e) {
var label = this.getAttribute('data-label');
tooltip.innerHTML = label;
tooltip.style.display = 'block';

// Position tooltip
var rect = wrapper.getBoundingClientRect();
var zoneRect = this.getBoundingClientRect();
tooltip.style.left = (zoneRect.left - rect.left + zoneRect.width/2) + 'px';
tooltip.style.top = (zoneRect.top - rect.top - tooltip.offsetHeight - 5) + 'px';

// Adjust if tooltip goes outside container
var tooltipRect = tooltip.getBoundingClientRect();
if (tooltipRect.right > rect.right) {
tooltip.style.left = (rect.right - rect.left - tooltipRect.width - 5) + 'px';
}
if (tooltipRect.left < rect.left) {
tooltip.style.left = '5px';
}
if (tooltipRect.top < rect.top) {
tooltip.style.top = (zoneRect.bottom - rect.top + 5) + 'px';
}
});

zone.addEventListener('mouseleave', function(e) {
tooltip.style.display = 'none';
});
});
}

// Wait for image to load before setting up hover zones
if (img.complete && img.offsetWidth > 0) {
// Image already loaded
setupHoverZones();
} else {
// Wait for image to load
img.addEventListener('load', setupHoverZones);
}
})();
</script>
<p><strong>Discussion:</strong> Power of load and powerflow result match perfectly. I guess this is just a PQ node for the powerflow.</p><h2 id="Bus-2:-Load-Machine"><a class="docs-heading-anchor" href="#Bus-2:-Load-Machine">Bus 2: Load + Machine</a><a id="Bus-2:-Load-Machine-1"></a><a class="docs-heading-anchor-permalink" href="#Bus-2:-Load-Machine" title="Permalink"></a></h2><pre><code class="language-julia hljs">inspect_collection(nodes[2]; size=(900,900))</code></pre><img src="c38129dd.png" alt="Example block output"/><script>
// Find the previous image element and wrap it with hover functionality
(function() {
var script = document.currentScript;
var img = script.previousElementSibling;

// Find the preceding img element
while (img && img.tagName !== 'IMG') {
img = img.previousElementSibling;
}

if (!img) return; // No image found

function setupHoverZones() {
// Create wrapper div
var wrapper = document.createElement('div');
wrapper.className = 'graph-hover-container';
wrapper.style.cssText = 'position: relative; display: inline-block;';

// Insert wrapper before img and move img into wrapper
img.parentNode.insertBefore(wrapper, img);
wrapper.appendChild(img);

// Ensure wrapper is exactly the same size as the image
wrapper.style.width = img.offsetWidth + 'px';
wrapper.style.height = img.offsetHeight + 'px';

// Create hover zones container
var hoverZones = document.createElement('div');
hoverZones.className = 'hover-zones';
hoverZones.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;';
wrapper.appendChild(hoverZones);

// Create tooltip
var tooltip = document.createElement('div');
tooltip.id = 'tooltip-' + Math.random().toString(36).substr(2, 9);
tooltip.style.cssText = `position: absolute;
background: rgba(0,0,0,0.8);
color: white;
padding: 5px 10px;
border-radius: 4px;
font-size: 10px;
font-family: monospace;
white-space: pre-line;
pointer-events: none;
z-index: 20;
display: none;
max-width: 400px;
word-wrap: break-word;`;
wrapper.appendChild(tooltip);

// Create hover zone data
var hoverZoneData = [{x: 43.014774927614084, y: 78.35427906168839, width: 2.2222222222222223, height: 2.2222222222222223, label: "TopologicalNode\n\"HV2 Bus 339\"\nConnectivityNodeContainer = unresolved ref", node: 1},
            {x: 40.059751422774994, y: 94.21212258631486, width: 2.2222222222222223, height: 2.2222222222222223, label: "BaseVoltage\n\"110.00 kV\"\nnominalVoltage = 110\ndescription = BaseVoltage 110.00 kV", node: 2},
            {x: 55.372708721787525, y: 64.44421738800112, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"Cubicle_HV2 Load 45\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 3},
            {x: 74.81040416205002, y: 58.59972957453263, width: 2.2222222222222223, height: 2.2222222222222223, label: "ConformLoad\n\"HV2 Load 45\"\nEquipment.EquipmentContainer = unresolved ref\nEnergyConsumer.p = 0.197259\nEnergyConsumer.q = -0.0113707", node: 4},
            {x: 78.43359330009896, y: 41.99276609328864, width: 2.2222222222222223, height: 2.2222222222222223, label: "ConformLoadGroup\n\"HV2 Load 45\"\nno properties", node: 5},
            {x: 85.16488892410793, y: 27.596589493919055, width: 2.2222222222222223, height: 2.2222222222222223, label: "SubLoadArea\n\"HV2 Load 45\"\nno properties", node: 6},
            {x: 92.30196901920166, y: 14.010099549972843, width: 2.2222222222222223, height: 2.2222222222222223, label: "LoadArea\n\"HV2 Load 45\"\nno properties", node: 7},
            {x: 87.78949302116303, y: 71.42485752152147, width: 2.2222222222222223, height: 2.2222222222222223, label: "LoadResponseCharacteristic\n\"mv_add1\"\nexponentModel = true\npVoltageExponent = 2\nqVoltageExponent = 2", node: 8},
            {x: 93.83838506812097, y: 58.83332069471692, width: 2.2222222222222223, height: 2.2222222222222223, label: "LoadAggregate\nno properties", node: 9},
            {x: 43.877915205418255, y: 51.22898377056042, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = 0.197259\nq = -0.0113707", node: 10},
            {x: 22.374686294618222, y: 77.81998239454298, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"Cubicle_HV2 Sgen 44\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 11},
            {x: 6.161614256627028, y: 69.16771219222792, width: 2.2222222222222223, height: 2.2222222222222223, label: "SynchronousMachine\n\"HV2 Sgen 44\"\nEquipment.EquipmentContainer = unresolved ref\ndescription = mv_add1\nRotatingMachine.ratedPowerFactor = 1\nRotatingMachine.ratedS = 1\nRotatingMachine.ratedU = 110\nearthing = false\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 0\nminQ = 0\nr = 0\nr0 = 0\nr2 = 99999\nsatDirectSubtransX = 999\ntype = unresolved ref\nx0 = 0.1\nx2 = 99999\nRegulatingCondEq.controlEnabled = false\nRotatingMachine.p = 0\nRotatingMachine.q = 0\noperatingMode = unresolved ref\nreferencePriority = 0", node: 12},
            {x: 9.331382322472717, y: 89.91999097812595, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = 0\nq = 0", node: 13},
            {x: 55.23212611219582, y: 91.68065790958686, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvVoltage\nangle = -0.00943165\nv = 117.503", node: 14}];

// Create hover zones with proper aspect ratio
hoverZoneData.forEach(function(zoneData, i) {
var zone = document.createElement('div');
zone.className = 'hover-zone';

// Use the width and height percentages calculated directly in Julia
var zoneWidth = zoneData.width;
var zoneHeight = zoneData.height;

zone.style.cssText = `position: absolute;
left: ${zoneData.x - zoneWidth/2}%;
top: ${zoneData.y - zoneHeight/2}%;
width: ${zoneWidth}%;
height: ${zoneHeight}%;
pointer-events: all;
cursor: pointer;
z-index: 10;
border: none;
background: transparent;`;
zone.setAttribute('data-label', zoneData.label);
zone.setAttribute('data-node', zoneData.node);
hoverZones.appendChild(zone);
});


// Add event listeners to hover zones
var zones = hoverZones.querySelectorAll('.hover-zone');
zones.forEach(function(zone) {
zone.addEventListener('mouseenter', function(e) {
var label = this.getAttribute('data-label');
tooltip.innerHTML = label;
tooltip.style.display = 'block';

// Position tooltip
var rect = wrapper.getBoundingClientRect();
var zoneRect = this.getBoundingClientRect();
tooltip.style.left = (zoneRect.left - rect.left + zoneRect.width/2) + 'px';
tooltip.style.top = (zoneRect.top - rect.top - tooltip.offsetHeight - 5) + 'px';

// Adjust if tooltip goes outside container
var tooltipRect = tooltip.getBoundingClientRect();
if (tooltipRect.right > rect.right) {
tooltip.style.left = (rect.right - rect.left - tooltipRect.width - 5) + 'px';
}
if (tooltipRect.left < rect.left) {
tooltip.style.left = '5px';
}
if (tooltipRect.top < rect.top) {
tooltip.style.top = (zoneRect.bottom - rect.top + 5) + 'px';
}
});

zone.addEventListener('mouseleave', function(e) {
tooltip.style.display = 'none';
});
});
}

// Wait for image to load before setting up hover zones
if (img.complete && img.offsetWidth > 0) {
// Image already loaded
setupHoverZones();
} else {
// Wait for image to load
img.addEventListener('load', setupHoverZones);
}
})();
</script>
<p><strong>Discussion:</strong></p><ul><li>Synchronous machine has power P=Q=0, no voltage controller</li><li>The bus power matches the load power, so I guess once again this is a PQ node?</li></ul><h2 id="Bus-1:-Three-Machines"><a class="docs-heading-anchor" href="#Bus-1:-Three-Machines">Bus 1: Three Machines</a><a id="Bus-1:-Three-Machines-1"></a><a class="docs-heading-anchor-permalink" href="#Bus-1:-Three-Machines" title="Permalink"></a></h2><pre><code class="language-julia hljs">inspect_collection(nodes[1]; size=(900,900))</code></pre><img src="b41d0d68.png" alt="Example block output"/><script>
// Find the previous image element and wrap it with hover functionality
(function() {
var script = document.currentScript;
var img = script.previousElementSibling;

// Find the preceding img element
while (img && img.tagName !== 'IMG') {
img = img.previousElementSibling;
}

if (!img) return; // No image found

function setupHoverZones() {
// Create wrapper div
var wrapper = document.createElement('div');
wrapper.className = 'graph-hover-container';
wrapper.style.cssText = 'position: relative; display: inline-block;';

// Insert wrapper before img and move img into wrapper
img.parentNode.insertBefore(wrapper, img);
wrapper.appendChild(img);

// Ensure wrapper is exactly the same size as the image
wrapper.style.width = img.offsetWidth + 'px';
wrapper.style.height = img.offsetHeight + 'px';

// Create hover zones container
var hoverZones = document.createElement('div');
hoverZones.className = 'hover-zones';
hoverZones.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;';
wrapper.appendChild(hoverZones);

// Create tooltip
var tooltip = document.createElement('div');
tooltip.id = 'tooltip-' + Math.random().toString(36).substr(2, 9);
tooltip.style.cssText = `position: absolute;
background: rgba(0,0,0,0.8);
color: white;
padding: 5px 10px;
border-radius: 4px;
font-size: 10px;
font-family: monospace;
white-space: pre-line;
pointer-events: none;
z-index: 20;
display: none;
max-width: 400px;
word-wrap: break-word;`;
wrapper.appendChild(tooltip);

// Create hover zone data
var hoverZoneData = [{x: 57.941972772893756, y: 61.45322811683431, width: 2.2222222222222223, height: 2.2222222222222223, label: "TopologicalNode\n\"EHV Bus 1865\"\nConnectivityNodeContainer = unresolved ref", node: 1},
            {x: 53.8841443134899, y: 72.00081472637414, width: 2.2222222222222223, height: 2.2222222222222223, label: "BaseVoltage\n\"220.00 kV\"\nnominalVoltage = 220\ndescription = BaseVoltage 220.00 kV", node: 2},
            {x: 56.003782382258336, y: 47.894262965841286, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"Cubicle_EHV Gen 200\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 3},
            {x: 55.179240619647516, y: 34.01825371950748, width: 2.2222222222222223, height: 2.2222222222222223, label: "SynchronousMachine\n\"EHV Gen 200\"\nEquipment.EquipmentContainer = unresolved ref\ndescription = pp_207\nRotatingMachine.ratedPowerFactor = 0.95\nRotatingMachine.ratedS = 242.105\nRotatingMachine.ratedU = 220\nearthing = true\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 75.5973\nminQ = -75.5973\nqPercent = 90.9989\nr = 0\nr0 = 0\nr2 = 0\nsatDirectSubtransX = 0.2\nsatDirectSyncX = 1.2\nshortCircuitRotorType = unresolved ref\ntype = unresolved ref\nx0 = 0.1\nx2 = 0.2\nRegulatingCondEq.controlEnabled = true\nRotatingMachine.p = 0\nRotatingMachine.q = -242.105\noperatingMode = unresolved ref\nreferencePriority = 0", node: 4},
            {x: 65.11345132421174, y: 39.38980803787233, width: 2.2222222222222223, height: 2.2222222222222223, label: "RegulatingControl\n\"Stactrl_EHV Bus 1865\"\nmode = unresolved ref\ndiscrete = false\nenabled = true\ntargetValue = 234.96\ntargetValueUnitMultiplier = unresolved ref", node: 5},
            {x: 67.88975929537702, y: 23.937696799370634, width: 2.2222222222222223, height: 2.2222222222222223, label: "ThermalGeneratingUnit\n\"EHV Gen 200\"\nEquipment.EquipmentContainer = unresolved ref\nGeneratingUnit.initialP = 0\nGeneratingUnit.maxOperatingP = 230\nGeneratingUnit.minOperatingP = 50\nGeneratingUnit.normalPF = 0", node: 6},
            {x: 76.99114582878221, y: 14.01009812790056, width: 2.2222222222222223, height: 2.2222222222222223, label: "FossilFuel\n\"EHV Gen 200\"\nfossilFuelType = unresolved ref", node: 7},
            {x: 42.71205042312426, y: 25.18914923165758, width: 2.2222222222222223, height: 2.2222222222222223, label: "SynchronousMachineTimeConstantReactance\n\"EHV Gen 200\"\nDynamicsFunctionBlock.enabled = true\nRotatingMachineDynamics.damping = 0\nRotatingMachineDynamics.inertia = 4.75\nRotatingMachineDynamics.saturationFactor = 0\nRotatingMachineDynamics.saturationFactor120 = 0\nRotatingMachineDynamics.statorLeakageReactance = 0.172\nRotatingMachineDynamics.statorResistance = 0\nSynchronousMachineDetailed.efdBaseRatio = 1\nSynchronousMachineDetailed.ifdBaseType = unresolved ref\nmodelType = unresolved ref\nrotorType = unresolved ref\ntpdo = 6.66667\ntppdo = 0.075\ntppqo = 0.075\ntpqo = 6.66667\nxDirectSubtrans = 0.2\nxDirectSync = 2\nxDirectTrans = 0.3\nxQuadSubtrans = 0.2\nxQuadSync = 2\nxQuadTrans = 0.3", node: 8},
            {x: 75.97522130454252, y: 46.008923514636415, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = -0.206473\nq = 0.0170694", node: 9},
            {x: 36.2980006713817, y: 48.1017901947193, width: 2.2222222222222223, height: 2.2222222222222223, label: "RegulatingControl\n\"Stactrl_EHV Bus 1865\"\nmode = unresolved ref\ndiscrete = false\nenabled = true\ntargetValue = 234.96\ntargetValueUnitMultiplier = unresolved ref", node: 10},
            {x: 22.99223620852262, y: 56.55693492862861, width: 2.2222222222222223, height: 2.2222222222222223, label: "SynchronousMachine\n\"EHV Gen 295\"\nEquipment.EquipmentContainer = unresolved ref\ndescription = pp_302\nRotatingMachine.ratedPowerFactor = 0.95\nRotatingMachine.ratedS = 23.6842\nRotatingMachine.ratedU = 220\nearthing = true\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 7.39539\nminQ = -7.39539\nqPercent = 9.00113\nr = 0\nr0 = 0\nr2 = 0\nsatDirectSubtransX = 0.2\nsatDirectSyncX = 1.2\nshortCircuitRotorType = unresolved ref\ntype = unresolved ref\nx0 = 0.1\nx2 = 0.2\nRegulatingCondEq.controlEnabled = true\nRotatingMachine.p = 0\nRotatingMachine.q = -23.6842\noperatingMode = unresolved ref\nreferencePriority = 0", node: 11},
            {x: 6.161616163265068, y: 62.433598016881156, width: 2.2222222222222223, height: 2.2222222222222223, label: "GeneratingUnit\n\"EHV Gen 295\"\nEquipment.EquipmentContainer = unresolved ref\ninitialP = 0\nmaxOperatingP = 22.5\nminOperatingP = 1\nnormalPF = 0", node: 12},
            {x: 6.754813711413994, y: 49.97467066844554, width: 2.2222222222222223, height: 2.2222222222222223, label: "SynchronousMachineTimeConstantReactance\n\"EHV Gen 295\"\nDynamicsFunctionBlock.enabled = true\nRotatingMachineDynamics.damping = 0\nRotatingMachineDynamics.inertia = 4.75\nRotatingMachineDynamics.saturationFactor = 0\nRotatingMachineDynamics.saturationFactor120 = 0\nRotatingMachineDynamics.statorLeakageReactance = 0.172\nRotatingMachineDynamics.statorResistance = 0\nSynchronousMachineDetailed.efdBaseRatio = 1\nSynchronousMachineDetailed.ifdBaseType = unresolved ref\nmodelType = unresolved ref\nrotorType = unresolved ref\ntpdo = 6.66667\ntppdo = 0.075\ntppqo = 0.075\ntpqo = 6.66667\nxDirectSubtrans = 0.2\nxDirectSync = 2\nxDirectTrans = 0.3\nxQuadSubtrans = 0.2\nxQuadSync = 2\nxQuadTrans = 0.3", node: 13},
            {x: 37.39292291991875, y: 64.87642934699906, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"Cubicle_EHV Gen 295\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 14},
            {x: 27.58916442160303, y: 76.00079558519232, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = -0.20569\nq = 0.00168842", node: 15},
            {x: 73.92119403544244, y: 71.34739191097816, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"Cubicle_EHV Sgen 76\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 16},
            {x: 77.74924376414927, y: 83.56560910619508, width: 2.2222222222222223, height: 2.2222222222222223, label: "SynchronousMachine\n\"EHV Sgen 76\"\nEquipment.EquipmentContainer = unresolved ref\ndescription = WP8\nRotatingMachine.ratedPowerFactor = 1\nRotatingMachine.ratedS = 36\nRotatingMachine.ratedU = 220\nearthing = false\nearthingStarPointR = 0\nearthingStarPointX = 0\nmaxQ = 0\nminQ = 0\nr = 0\nr0 = 0\nr2 = 99999\nsatDirectSubtransX = 999\ntype = unresolved ref\nx0 = 0.1\nx2 = 99999\nRegulatingCondEq.controlEnabled = false\nRotatingMachine.p = -0.063126\nRotatingMachine.q = 0\noperatingMode = unresolved ref\nreferencePriority = 0", node: 17},
            {x: 84.7171228630305, y: 94.21212144222683, width: 2.2222222222222223, height: 2.2222222222222223, label: "WindGeneratingUnit\n\"EHV Sgen 76\"\nEquipment.EquipmentContainer = unresolved ref\nGeneratingUnit.initialP = 0.063126\nGeneratingUnit.maxOperatingP = 36\nGeneratingUnit.minOperatingP = 0\nwindGenUnitType = unresolved ref\nGeneratingUnit.normalPF = 0", node: 18},
            {x: 93.83837591999179, y: 71.21377479743887, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = -0.063126\nq = 0", node: 19},
            {x: 74.86506798760675, y: 59.91683280841684, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvVoltage\nangle = 0\nv = 235.001", node: 20}];

// Create hover zones with proper aspect ratio
hoverZoneData.forEach(function(zoneData, i) {
var zone = document.createElement('div');
zone.className = 'hover-zone';

// Use the width and height percentages calculated directly in Julia
var zoneWidth = zoneData.width;
var zoneHeight = zoneData.height;

zone.style.cssText = `position: absolute;
left: ${zoneData.x - zoneWidth/2}%;
top: ${zoneData.y - zoneHeight/2}%;
width: ${zoneWidth}%;
height: ${zoneHeight}%;
pointer-events: all;
cursor: pointer;
z-index: 10;
border: none;
background: transparent;`;
zone.setAttribute('data-label', zoneData.label);
zone.setAttribute('data-node', zoneData.node);
hoverZones.appendChild(zone);
});


// Add event listeners to hover zones
var zones = hoverZones.querySelectorAll('.hover-zone');
zones.forEach(function(zone) {
zone.addEventListener('mouseenter', function(e) {
var label = this.getAttribute('data-label');
tooltip.innerHTML = label;
tooltip.style.display = 'block';

// Position tooltip
var rect = wrapper.getBoundingClientRect();
var zoneRect = this.getBoundingClientRect();
tooltip.style.left = (zoneRect.left - rect.left + zoneRect.width/2) + 'px';
tooltip.style.top = (zoneRect.top - rect.top - tooltip.offsetHeight - 5) + 'px';

// Adjust if tooltip goes outside container
var tooltipRect = tooltip.getBoundingClientRect();
if (tooltipRect.right > rect.right) {
tooltip.style.left = (rect.right - rect.left - tooltipRect.width - 5) + 'px';
}
if (tooltipRect.left < rect.left) {
tooltip.style.left = '5px';
}
if (tooltipRect.top < rect.top) {
tooltip.style.top = (zoneRect.bottom - rect.top + 5) + 'px';
}
});

zone.addEventListener('mouseleave', function(e) {
tooltip.style.display = 'none';
});
});
}

// Wait for image to load before setting up hover zones
if (img.complete && img.offsetWidth > 0) {
// Image already loaded
setupHoverZones();
} else {
// Wait for image to load
img.addEventListener('load', setupHoverZones);
}
})();
</script>
<p><strong>Discussion:</strong></p><ul><li>Why is the regulating control connected to a different terminal equipment than the machine?</li><li>The powerflow result on both machine terminals is not even close to the machine setpoint (nor power factor)</li><li>The voltage of the topological node does not match the reference value for the voltage regulator</li><li>On the third machine, the PQ setpoints are consistent with the powerflow result</li><li>The overall bus power (as seen by state value of connected transformer) is P=-0.47 and Q=0.019, so the SvPowerflow values seem consistent</li></ul><h2 id="Powerline-1:-Transformer"><a class="docs-heading-anchor" href="#Powerline-1:-Transformer">Powerline 1: Transformer</a><a id="Powerline-1:-Transformer-1"></a><a class="docs-heading-anchor-permalink" href="#Powerline-1:-Transformer" title="Permalink"></a></h2><pre><code class="language-julia hljs">inspect_collection(edges[1]; size=(900,900))</code></pre><img src="03cd13dd.png" alt="Example block output"/><script>
// Find the previous image element and wrap it with hover functionality
(function() {
var script = document.currentScript;
var img = script.previousElementSibling;

// Find the preceding img element
while (img && img.tagName !== 'IMG') {
img = img.previousElementSibling;
}

if (!img) return; // No image found

function setupHoverZones() {
// Create wrapper div
var wrapper = document.createElement('div');
wrapper.className = 'graph-hover-container';
wrapper.style.cssText = 'position: relative; display: inline-block;';

// Insert wrapper before img and move img into wrapper
img.parentNode.insertBefore(wrapper, img);
wrapper.appendChild(img);

// Ensure wrapper is exactly the same size as the image
wrapper.style.width = img.offsetWidth + 'px';
wrapper.style.height = img.offsetHeight + 'px';

// Create hover zones container
var hoverZones = document.createElement('div');
hoverZones.className = 'hover-zones';
hoverZones.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;';
wrapper.appendChild(hoverZones);

// Create tooltip
var tooltip = document.createElement('div');
tooltip.id = 'tooltip-' + Math.random().toString(36).substr(2, 9);
tooltip.style.cssText = `position: absolute;
background: rgba(0,0,0,0.8);
color: white;
padding: 5px 10px;
border-radius: 4px;
font-size: 10px;
font-family: monospace;
white-space: pre-line;
pointer-events: none;
z-index: 20;
display: none;
max-width: 400px;
word-wrap: break-word;`;
wrapper.appendChild(tooltip);

// Create hover zone data
var hoverZoneData = [{x: 63.71174440212164, y: 64.11674245105475, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"HV2 Bus 22\"\nACDCsequenceNumber = 2\nphases = unresolved ref\nACDCconnected = true", node: 1},
            {x: 50.480234270273094, y: 52.23042161916407, width: 2.2222222222222223, height: 2.2222222222222223, label: "PowerTransformer\n\"HV2 Trafo 3\"\nEquipment.EquipmentContainer = unresolved ref\nisPartOfGeneratorUnit = false\noperationalValuesConsidered = false", node: 2},
            {x: 38.0120633289694, y: 40.63088215006418, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"EHV Bus 3094\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 3},
            {x: 25.45934769410178, y: 28.123611492239043, width: 2.2222222222222223, height: 2.2222222222222223, label: "TopologicalNode\n\"EHV Bus 1865\"\nno properties", node: 4},
            {x: 43.20621272217587, y: 24.36770653114124, width: 2.2222222222222223, height: 2.2222222222222223, label: "BaseVoltage\n\"220.00 kV\"\nnominalVoltage = 220\ndescription = BaseVoltage 220.00 kV", node: 5},
            {x: 31.564244966536375, y: 14.010098823852257, width: 2.2222222222222223, height: 2.2222222222222223, label: "VoltageLevel\n\"EHV Bus 1865-EHV Bus 1866\"\nSubstation = unresolved ref", node: 6},
            {x: 6.161614915486461, y: 23.893648607179763, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvVoltage\nangle = 0\nv = 235.001", node: 7},
            {x: 18.152784066916972, y: 46.31922457247638, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = 0.474291\nq = -0.0195198", node: 8},
            {x: 51.187486706214514, y: 26.67476499590706, width: 2.2222222222222223, height: 2.2222222222222223, label: "OperationalLimitSet\n\"Current rating for HV2 Trafo 3\"\nno properties", node: 9},
            {x: 55.93076881578397, y: 38.55723812659805, width: 2.2222222222222223, height: 2.2222222222222223, label: "PowerTransformerEnd\n\"HV2 Trafo 3\"\nb = -2.0138e-6\nb0 = -0.00206612\nconnectionKind = unresolved ref\ng = 1.44628e-6\ng0 = 0\nphaseAngleClock = 0\nr = 0.207044\nr0 = 0\nratedS = 300\nratedU = 220\nx = 19.3589\nx0 = 4.84\nTransformerEnd.endNumber = 1\nTransformerEnd.grounded = true\nTransformerEnd.rground = 0\nTransformerEnd.xground = 0", node: 10},
            {x: 76.93655413903004, y: 38.529282983512026, width: 2.2222222222222223, height: 2.2222222222222223, label: "RatioTapChanger\n\"HV2 Trafo 3\"\nstepVoltageIncrement = 1\ntculControlMode = unresolved ref\nTapChanger.highStep = 16\nTapChanger.lowStep = -16\nTapChanger.ltcFlag = false\nTapChanger.neutralStep = 0\nTapChanger.neutralU = 220\nTapChanger.normalStep = 0\nTapChanger.controlEnabled = true\nTapChanger.step = 0", node: 11},
            {x: 79.66492475969548, y: 53.54656494875238, width: 2.2222222222222223, height: 2.2222222222222223, label: "TapChangerControl\n\"HV2 Trafo 3\"\nRegulatingControl.mode = unresolved ref\nRegulatingControl.discrete = true\nRegulatingControl.enabled = true\nRegulatingControl.targetDeadband = 2.2\nRegulatingControl.targetValue = 110\nRegulatingControl.targetValueUnitMultiplier = unresolved ref", node: 12},
            {x: 93.8383853101389, y: 30.149454548380426, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvTapStep\nposition = 0", node: 13},
            {x: 52.55900032073152, y: 65.58451491331809, width: 2.2222222222222223, height: 2.2222222222222223, label: "PowerTransformerEnd\n\"HV2 Trafo 3\"\nb = 0\nb0 = 0\nconnectionKind = unresolved ref\ng = 0\ng0 = 0\nphaseAngleClock = 0\nr = 0\nr0 = 0\nratedS = 300\nratedU = 110\nx = 0\nx0 = 0\nTransformerEnd.endNumber = 2\nTransformerEnd.grounded = true\nTransformerEnd.rground = 0\nTransformerEnd.xground = 0", node: 14},
            {x: 70.40947536231025, y: 78.29467686561415, width: 2.2222222222222223, height: 2.2222222222222223, label: "BaseVoltage\n\"110.00 kV\"\nnominalVoltage = 110\ndescription = BaseVoltage 110.00 kV", node: 15},
            {x: 58.80551300174535, y: 81.3816865139758, width: 2.2222222222222223, height: 2.2222222222222223, label: "TopologicalNode\n\"HV2 Bus 7\"\nno properties", node: 16},
            {x: 74.41664911778537, y: 90.78655216684595, width: 2.2222222222222223, height: 2.2222222222222223, label: "VoltageLevel\n\"HV2 Bus 7-HV2 Bus 8\"\nSubstation = unresolved ref", node: 17},
            {x: 48.251943379236465, y: 94.21212350223259, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvVoltage\nangle = -0.00868266\nv = 117.504", node: 18},
            {x: 84.65857568707037, y: 67.6557476730973, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = -0.394418\nq = 0.130803", node: 19},
            {x: 41.106351550041936, y: 72.0360179387511, width: 2.2222222222222223, height: 2.2222222222222223, label: "OperationalLimitSet\n\"Current rating for HV2 Trafo 3\"\nno properties", node: 20}];

// Create hover zones with proper aspect ratio
hoverZoneData.forEach(function(zoneData, i) {
var zone = document.createElement('div');
zone.className = 'hover-zone';

// Use the width and height percentages calculated directly in Julia
var zoneWidth = zoneData.width;
var zoneHeight = zoneData.height;

zone.style.cssText = `position: absolute;
left: ${zoneData.x - zoneWidth/2}%;
top: ${zoneData.y - zoneHeight/2}%;
width: ${zoneWidth}%;
height: ${zoneHeight}%;
pointer-events: all;
cursor: pointer;
z-index: 10;
border: none;
background: transparent;`;
zone.setAttribute('data-label', zoneData.label);
zone.setAttribute('data-node', zoneData.node);
hoverZones.appendChild(zone);
});


// Add event listeners to hover zones
var zones = hoverZones.querySelectorAll('.hover-zone');
zones.forEach(function(zone) {
zone.addEventListener('mouseenter', function(e) {
var label = this.getAttribute('data-label');
tooltip.innerHTML = label;
tooltip.style.display = 'block';

// Position tooltip
var rect = wrapper.getBoundingClientRect();
var zoneRect = this.getBoundingClientRect();
tooltip.style.left = (zoneRect.left - rect.left + zoneRect.width/2) + 'px';
tooltip.style.top = (zoneRect.top - rect.top - tooltip.offsetHeight - 5) + 'px';

// Adjust if tooltip goes outside container
var tooltipRect = tooltip.getBoundingClientRect();
if (tooltipRect.right > rect.right) {
tooltip.style.left = (rect.right - rect.left - tooltipRect.width - 5) + 'px';
}
if (tooltipRect.left < rect.left) {
tooltip.style.left = '5px';
}
if (tooltipRect.top < rect.top) {
tooltip.style.top = (zoneRect.bottom - rect.top + 5) + 'px';
}
});

zone.addEventListener('mouseleave', function(e) {
tooltip.style.display = 'none';
});
});
}

// Wait for image to load before setting up hover zones
if (img.complete && img.offsetWidth > 0) {
// Image already loaded
setupHoverZones();
} else {
// Wait for image to load
img.addEventListener('load', setupHoverZones);
}
})();
</script>
<p><strong>Discussion:</strong></p><ul><li>Both transformer ends have b/g and r/x, so this can be interpreted as a pi-line with two bases and r1+r2 / x1+x2 impedance.</li><li>The RatioTapChanger points at one transformer end but regulates the voltage at the other transformer end. Does it mean it acts on one end to control voltage on the other end?</li></ul><h2 id="Powerline-2:-AC-Pi-Line"><a class="docs-heading-anchor" href="#Powerline-2:-AC-Pi-Line">Powerline 2: AC Pi-Line</a><a id="Powerline-2:-AC-Pi-Line-1"></a><a class="docs-heading-anchor-permalink" href="#Powerline-2:-AC-Pi-Line" title="Permalink"></a></h2><pre><code class="language-julia hljs">inspect_collection(edges[2]; size=(900,900))</code></pre><img src="d2143954.png" alt="Example block output"/><script>
// Find the previous image element and wrap it with hover functionality
(function() {
var script = document.currentScript;
var img = script.previousElementSibling;

// Find the preceding img element
while (img && img.tagName !== 'IMG') {
img = img.previousElementSibling;
}

if (!img) return; // No image found

function setupHoverZones() {
// Create wrapper div
var wrapper = document.createElement('div');
wrapper.className = 'graph-hover-container';
wrapper.style.cssText = 'position: relative; display: inline-block;';

// Insert wrapper before img and move img into wrapper
img.parentNode.insertBefore(wrapper, img);
wrapper.appendChild(img);

// Ensure wrapper is exactly the same size as the image
wrapper.style.width = img.offsetWidth + 'px';
wrapper.style.height = img.offsetHeight + 'px';

// Create hover zones container
var hoverZones = document.createElement('div');
hoverZones.className = 'hover-zones';
hoverZones.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;';
wrapper.appendChild(hoverZones);

// Create tooltip
var tooltip = document.createElement('div');
tooltip.id = 'tooltip-' + Math.random().toString(36).substr(2, 9);
tooltip.style.cssText = `position: absolute;
background: rgba(0,0,0,0.8);
color: white;
padding: 5px 10px;
border-radius: 4px;
font-size: 10px;
font-family: monospace;
white-space: pre-line;
pointer-events: none;
z-index: 20;
display: none;
max-width: 400px;
word-wrap: break-word;`;
wrapper.appendChild(tooltip);

// Create hover zone data
var hoverZoneData = [{x: 42.52788338011263, y: 76.55025844047337, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"HV2 Bus 345\"\nACDCsequenceNumber = 2\nphases = unresolved ref\nACDCconnected = true", node: 1},
            {x: 57.06180267895298, y: 61.12970955287804, width: 2.2222222222222223, height: 2.2222222222222223, label: "ACLineSegment\n\"HV2 Line 112\"\nb0ch = 0\nbch = 7.7883e-6\ng0ch = 0\ngch = 0\nr = 0.301627\nr0 = 0\nshortCircuitEndTemperature = 80\nx = 0.815356\nx0 = 0\nConductor.length = 2.75458", node: 2},
            {x: 42.16341662451478, y: 45.40626500133026, width: 2.2222222222222223, height: 2.2222222222222223, label: "BaseVoltage\n\"110.00 kV\"\nnominalVoltage = 110\ndescription = BaseVoltage 110.00 kV", node: 3},
            {x: 75.1002844286209, y: 49.408127063384676, width: 2.2222222222222223, height: 2.2222222222222223, label: "Terminal\n\"HV2 Bus 11\"\nACDCsequenceNumber = 1\nphases = unresolved ref\nACDCconnected = true", node: 4},
            {x: 60.150826054343135, y: 33.7281385252444, width: 2.2222222222222223, height: 2.2222222222222223, label: "TopologicalNode\n\"HV2 Bus 7\"\nno properties", node: 5},
            {x: 42.957630671543704, y: 27.150149321824692, width: 2.2222222222222223, height: 2.2222222222222223, label: "VoltageLevel\n\"HV2 Bus 7-HV2 Bus 8\"\nSubstation = unresolved ref", node: 6},
            {x: 65.5968563047646, y: 14.010104064862317, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvVoltage\nangle = -0.00868266\nv = 117.504", node: 7},
            {x: 92.59178984284924, y: 61.09201961608155, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = 0.197183\nq = -0.119135", node: 8},
            {x: 93.83838736055499, y: 40.10290772113454, width: 2.2222222222222223, height: 2.2222222222222223, label: "OperationalLimitSet\n\"Current rating for HV2 Line 112\"\nno properties", node: 9},
            {x: 27.68168346333408, y: 60.78442036715113, width: 2.2222222222222223, height: 2.2222222222222223, label: "TopologicalNode\n\"HV2 Bus 339\"\nno properties", node: 10},
            {x: 22.73837753257552, y: 43.99862201073487, width: 2.2222222222222223, height: 2.2222222222222223, label: "VoltageLevel\n\"HV2 Bus 339-HV2 Bus 340\"\nSubstation = unresolved ref", node: 11},
            {x: 6.1616172456317155, y: 63.53762768710149, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvVoltage\nangle = -0.00943165\nv = 117.503", node: 12},
            {x: 52.847561040071945, y: 94.21212233837898, width: 2.2222222222222223, height: 2.2222222222222223, label: "SvPowerFlow\np = -0.197182\nq = 0.0116045", node: 13},
            {x: 30.475287215217627, y: 92.90917807598265, width: 2.2222222222222223, height: 2.2222222222222223, label: "OperationalLimitSet\n\"Current rating for HV2 Line 112\"\nno properties", node: 14}];

// Create hover zones with proper aspect ratio
hoverZoneData.forEach(function(zoneData, i) {
var zone = document.createElement('div');
zone.className = 'hover-zone';

// Use the width and height percentages calculated directly in Julia
var zoneWidth = zoneData.width;
var zoneHeight = zoneData.height;

zone.style.cssText = `position: absolute;
left: ${zoneData.x - zoneWidth/2}%;
top: ${zoneData.y - zoneHeight/2}%;
width: ${zoneWidth}%;
height: ${zoneHeight}%;
pointer-events: all;
cursor: pointer;
z-index: 10;
border: none;
background: transparent;`;
zone.setAttribute('data-label', zoneData.label);
zone.setAttribute('data-node', zoneData.node);
hoverZones.appendChild(zone);
});


// Add event listeners to hover zones
var zones = hoverZones.querySelectorAll('.hover-zone');
zones.forEach(function(zone) {
zone.addEventListener('mouseenter', function(e) {
var label = this.getAttribute('data-label');
tooltip.innerHTML = label;
tooltip.style.display = 'block';

// Position tooltip
var rect = wrapper.getBoundingClientRect();
var zoneRect = this.getBoundingClientRect();
tooltip.style.left = (zoneRect.left - rect.left + zoneRect.width/2) + 'px';
tooltip.style.top = (zoneRect.top - rect.top - tooltip.offsetHeight - 5) + 'px';

// Adjust if tooltip goes outside container
var tooltipRect = tooltip.getBoundingClientRect();
if (tooltipRect.right > rect.right) {
tooltip.style.left = (rect.right - rect.left - tooltipRect.width - 5) + 'px';
}
if (tooltipRect.left < rect.left) {
tooltip.style.left = '5px';
}
if (tooltipRect.top < rect.top) {
tooltip.style.top = (zoneRect.bottom - rect.top + 5) + 'px';
}
});

zone.addEventListener('mouseleave', function(e) {
tooltip.style.display = 'none';
});
});
}

// Wait for image to load before setting up hover zones
if (img.complete && img.offsetWidth > 0) {
// Image already loaded
setupHoverZones();
} else {
// Wait for image to load
img.addEventListener('load', setupHoverZones);
}
})();
</script>
<p><strong>Discussion:</strong> Seems fine.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../cgmes_linemodel/">Wrong Powerflow data in CGMES Export »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 29 August 2025 14:11">Friday 29 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
